html
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0, user-scalable=no')
    meta(http-equiv='X-UA-Compatible', content='ie=edge')
    title #{ renderData.meta.title || "" }
    meta(name='keywords' content=renderData.meta.keywords || "")
    <meta name="format-detection" content="telephone=no">
    meta(name='description' content=renderData.meta.description || "")
    link(rel='shortcut icon' type='image/x-icon' href='//s.baixing.net/favicon.ico')
    block styles
  body
    //-初始化公共数据
    - const { qq, phone, phone2, weChat, contactName, kf53StyleUrl, union400 } = renderData.basic.contact
    - const { company, person, copyRight ,shop} = renderData.basic
    - const { currentPage, currentPathname, categoryId, domainType, shopId, shopName, userInfo, isRedTopbar } = renderData
    //- 名称先取企业别称 后取企业名称
    - companyName = renderData.basic.company.alias ||  renderData.basic.company.name ||''
    //-导航因为后台可设置是否显示，因此要如下处理
    - nav = renderData.navigation
    - productListTab = nav.filter(x => x.position == "productListPage")
    - newsLinkListTab = nav.filter(x => x.position == "articleListPage")
    if productListTab.length >0
      - productLink = productListTab[0].content
    if newsLinkListTab.length >0
      - newsLink = newsLinkListTab[0].content
    - aboutLink =  currentPathname.indexOf(shopName)===-1?'/about': '/'+shopName+'/about/'
    - defaultImg = "//file.baixing.net/202107/e9a1688b5c861d17484d61515c207390.png"
    - defaultLogo = "//file.baixing.net/201709/4916aa54f4b4c69b4c01591fe6a87046.png"

    //- 每个页面的header有公共的也有页面特有的，所以在页面具体的地方再插入一个 block header修改
    block public-header

    #layout-content
      block content

    block footer

    block customer-service


  //-把打点值赋给window，便于传给node层和其他js层
  block append scripts
    script.
      window.domainType = '#{shop.domainType}';
      window.shopId = #{shopId};
      //  '#{ 变量 }'实际上是一个字符串 'true/false'
      let isRedTopbar = '#{ isRedTopbar }';
      if(isRedTopbar){
          window.isRedTopbar = isRedTopbar
      } else {
          window.isRedTopbar = '';
      }
      let pageTemplate = '#{ pageTemplate }';
      window.pageTemplate = pageTemplate || '';
      let isSem = '#{ isSem }';
      if(isSem){
          window.isSem = isSem
      } else {
          window.isSem =  '';
      }
      let isCn = '#{ isCn }';
      if(isCn){
          window.isCn = isCn
      } else {
          window.isCn =  '';
      }
    include ../vendor/baidutongji.pug
    //-TODO:开发阶段先注释掉
    include ../vendor/53kf.pug
  :combine(fileName=["tb-vendors.js", "tb-commons.js"])
  block scripts


